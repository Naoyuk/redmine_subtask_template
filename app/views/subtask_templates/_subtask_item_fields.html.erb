<div class="nested-fields subtask-item" style="border: 1px solid #ddd; margin: 10px 0; padding: 15px; background: #f9f9f9;">
  <div style="float: right;">
    <% unless form.object.new_record? %>
      <%= form.hidden_field :_destroy %>
      <a href="#" class="icon icon-del remove_fields" data-confirm="Are you sure you want to delete this subtask?">Delete</a>
    <% else %>
      <a href="#" class="icon icon-del remove_fields" data-confirm="Are you sure you want to delete this subtask?">Delete</a>
    <% end %>
  </div>

  <div class="clear-both">
    <p>
      <%= form.label :title, 'Subtask Title' %><span class="required"> *</span>
      <%= form.text_field :title, size: 60, required: true, 
            placeholder: 'Enter the subtask title' %>
    </p>

    <p>
      <%= form.label :description, 'Description' %>
      <%= form.text_area :description, rows: 3, cols: 60,
            placeholder: 'Detailed description (optional)' %>
    </p>

    <div style="display: flex; gap: 20px;">
      <div style="flex: 1;">
        <%= form.label :tracker_id, 'Tracker' %>
        <%= form.select :tracker_id,
              options_from_collection_for_select(Tracker.sorted, :id, :name, form.object.tracker_id),
              { include_blank: 'Default' },
              { class: 'select2-small' } %>
      </div>

      <div style="flex: 1;">
        <%= form.label :assigned_to_id, 'Assignee' %>
        <%= form.select :assigned_to_id,
              options_from_collection_for_select(User.active.sorted, :id, :name, form.object.assigned_to_id),
              { include_blank: 'Unassigned' },
              { class: 'select2-small' } %>
      </div>

      <div style="flex: 1;">
        <%= form.label :priority_id, 'Priority' %>
        <%= form.select :priority_id,
              options_from_collection_for_select(IssuePriority.active, :id, :name, form.object.priority_id),
              { include_blank: 'Default' },
              { class: 'select2-small' } %>
      </div>
    </div>
  </div>
</div>
